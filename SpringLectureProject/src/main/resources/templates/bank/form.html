<!doctype html>
<html lang="hu" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MNB árfolyamok</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/fontawesome-all.min.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/theme.css">
    <link rel="stylesheet" href="/css/arfolyam.css">
</head>
<body class="is-preload">
<div id="wrapper">
    <div id="main">
        <div class="inner">

            <header id="header">
                <a href="/" class="logo"><strong>Magyar Nemzeti Bank</strong> • Devizakereskedő kliens</a>
            </header>

            <section class="mnb-grid">
                <div class="mnb-form">
                    <header class="major">
                        <h2>Árfolyam lekérdezés</h2>
                    </header>

                    <form th:action="@{/mnb}" th:object="${dto}" method="post">
                        <div class="form-row">
                            <div class="field">
                                <label for="startDate">Kezdő dátum</label>
                                <input type="date" id="startDate" th:field="*{startDate}">
                            </div>
                            <div class="field">
                                <label for="endDate">Záró dátum</label>
                                <input type="date" id="endDate" th:field="*{endDate}">
                            </div>
                        </div>

                        <div class="field">
                            <label for="currencies">Deviza</label>
                            <select id="currencies" th:field="*{selectedCurrency}">
                                <option value="" disabled th:selected="*{selectedCurrency} == null">-- Válassz devizát --</option>
                                <option th:each="c : ${currencies}" th:value="${c}" th:text="${c}">EUR</option>
                            </select>
                        </div>

                        <ul class="actions" style="margin-top:1rem">
                            <li><button type="submit" class="button primary">Lekérdezés</button></li>
                            <li><a href="/" class="button">Vissza a főoldalra</a></li>
                        </ul>
                    </form>
                </div>


                <aside class="mnb-side two-col">
                    <div class="card highlight">
                        <h3>Gyors idősáv</h3>
                        <div class="chips">
                            <button type="button" class="chip" data-days="7">Utolsó 7 nap</button>
                            <button type="button" class="chip" data-days="30">Utolsó 30 nap</button>
                            <button type="button" class="chip" data-days="365">1 év</button>
                            <button type="button" class="chip" data-ytd="1">Idei év</button>
                        </div>
                        <p class="muted">A gombok automatikusan kitöltik a dátum mezőket.</p>
                    </div>

                    <div class="card">
                        <h3>Tipp</h3>
                        <p>Az MNB csak munkanapokra ad árfolyamot; hétvégékre/ünnepnapokra nincs adat.</p>
                    </div>
                </aside>
            </section>
        </div>
    </div>
</div>

<script src="/js/jquery.min.js"></script>
<script src="/js/browser.min.js"></script>
<script src="/js/breakpoints.min.js"></script>
<script src="/js/util.js"></script>
<script src="/js/main.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>


<script>
    (function(){
      const start = document.getElementById('startDate');
      const end   = document.getElementById('endDate');
      const toISO = d => d.toISOString().slice(0,10);

      document.querySelectorAll('.chip').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const now = new Date();
          let from = null;

          if (btn.dataset.days){
            const days = parseInt(btn.dataset.days,10);
            from = new Date(now);
            from.setDate(now.getDate() - days + 1);
          } else if (btn.dataset.ytd){
            from = new Date(now.getFullYear(), 0, 1);
          }

          if (from){
            start.value = toISO(from);
            end.value   = toISO(now);
          }
        });
      });
    })();
</script>
</body>
</html>
